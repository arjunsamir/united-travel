(function(t, n) {
    "object" == typeof $4ad1ef153db48ed88808b8625e3fc96f$exports && "undefined" != "object" ? $4ad1ef153db48ed88808b8625e3fc96f$exports = n() : "function" == typeof define && define.amd ? define(n) : (t = t || self).barba = n();
})($4ad1ef153db48ed88808b8625e3fc96f$exports, function() {
    function t(t1, n) {
        for(var r = 0; r < n.length; r++){
            var e = n[r];
            e.enumerable = e.enumerable || false, e.configurable = true, "value" in e && (e.writable = true), Object.defineProperty(t1, e.key, e);
        }
    }
    function n(n1, r, e) {
        return r && t(n1.prototype, r), e && t(n1, e), n1;
    }
    function r2() {
        return (r2 = Object.assign || function(t1) {
            for(var n1 = 1; n1 < arguments.length; n1++){
                var r1 = arguments[n1];
                for(var e in r1)Object.prototype.hasOwnProperty.call(r1, e) && (t1[e] = r1[e]);
            }
            return t1;
        }).apply(this, arguments);
    }
    function e(t1, n1) {
        t1.prototype = Object.create(n1.prototype), t1.prototype.constructor = t1, t1.__proto__ = n1;
    }
    function i3(t1) {
        return (i3 = Object.setPrototypeOf ? Object.getPrototypeOf : function(t2) {
            return t2.__proto__ || Object.getPrototypeOf(t2);
        })(t1);
    }
    function o4(t1, n1) {
        return (o4 = Object.setPrototypeOf || function(t2, n2) {
            return t2.__proto__ = n2, t2;
        })(t1, n1);
    }
    function u1(t1, n1, r2) {
        return (u1 = (function() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return false;
            if (Reflect.construct.sham) return false;
            if ("function" == typeof Proxy) return true;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
            } catch (t2) {
                return false;
            }
        })() ? Reflect.construct : function(t2, n2, r3) {
            var e1 = [
                null
            ];
            e1.push.apply(e1, n2);
            var i1 = new (Function.bind.apply(t2, e1));
            return r3 && o4(i1, r3.prototype), i1;
        }).apply(null, arguments);
    }
    function f1(t1) {
        var n1 = "function" == typeof Map ? new Map : void 0;
        return (f1 = function(t2) {
            if (null === t2 || -1 === Function.toString.call(t2).indexOf("[native code]")) return t2;
            if ("function" != typeof t2) throw new TypeError("Super expression must either be null or a function");
            if ((void 0) !== n1) {
                if (n1.has(t2)) return n1.get(t2);
                n1.set(t2, r3);
            }
            function r3() {
                return u1(t2, arguments, i3(this).constructor);
            }
            return r3.prototype = Object.create(t2.prototype, {
                constructor: {
                    value: r3,
                    enumerable: false,
                    writable: true,
                    configurable: true
                }
            }), o4(r3, t2);
        })(t1);
    }
    function s(t1, n1) {
        try {
            var r3 = t1();
        } catch (t2) {
            return n1(t2);
        }
        return r3 && r3.then ? r3.then(void 0, n1) : r3;
    }
    "undefined" != typeof Symbol && (Symbol.iterator || (Symbol.iterator = Symbol("Symbol.iterator"))), "undefined" != typeof Symbol && (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol("Symbol.asyncIterator")));
    var c, a = "2.9.7", h = function() {
    };
    (function(t1) {
        t1[t1.off = 0] = "off", t1[t1.error = 1] = "error", t1[t1.warning = 2] = "warning", t1[t1.info = 3] = "info", t1[t1.debug = 4] = "debug";
    })(c || (c = {
    }));
    var v = c.off, l = function() {
        function t1(t2) {
            this.t = t2;
        }
        t1.getLevel = function() {
            return v;
        }, t1.setLevel = function(t2) {
            return v = c[t2];
        };
        var n1 = t1.prototype;
        return n1.error = function() {
            for(var t2 = arguments.length, n2 = new Array(t2), r3 = 0; r3 < t2; r3++)n2[r3] = arguments[r3];
            this.i(console.error, c.error, n2);
        }, n1.warn = function() {
            for(var t2 = arguments.length, n2 = new Array(t2), r3 = 0; r3 < t2; r3++)n2[r3] = arguments[r3];
            this.i(console.warn, c.warning, n2);
        }, n1.info = function() {
            for(var t2 = arguments.length, n2 = new Array(t2), r3 = 0; r3 < t2; r3++)n2[r3] = arguments[r3];
            this.i(console.info, c.info, n2);
        }, n1.debug = function() {
            for(var t2 = arguments.length, n2 = new Array(t2), r3 = 0; r3 < t2; r3++)n2[r3] = arguments[r3];
            this.i(console.log, c.debug, n2);
        }, n1.i = function(n2, r3, e1) {
            r3 <= t1.getLevel() && n2.apply(console, [
                "[" + this.t + "] "
            ].concat(e1));
        }, t1;
    }(), d = O, m = E, p = g, w = x, b = T, y = "/", P = new RegExp([
        "(\\\\.)",
        "(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"
    ].join("|"), "g");
    function g(t1, n1) {
        for(var r3, e1 = [], i1 = 0, o1 = 0, u1 = "", f1 = n1 && n1.delimiter || y, s1 = n1 && n1.whitelist || void 0, c1 = false; null !== (r3 = P.exec(t1));){
            var a1 = r3[0], h1 = r3[1], v1 = r3.index;
            if (u1 += t1.slice(o1, v1), o1 = v1 + a1.length, h1) u1 += h1[1], c1 = true;
            else {
                var l1 = "", d1 = r3[2], m1 = r3[3], p1 = r3[4], w1 = r3[5];
                if (!c1 && u1.length) {
                    var b1 = u1.length - 1, g1 = u1[b1];
                    (!s1 || s1.indexOf(g1) > -1) && (l1 = g1, u1 = u1.slice(0, b1));
                }
                u1 && (e1.push(u1), u1 = "", c1 = false);
                var E = m1 || p1, x = l1 || f1;
                e1.push({
                    name: d1 || i1++,
                    prefix: l1,
                    delimiter: x,
                    optional: "?" === w1 || "*" === w1,
                    repeat: "+" === w1 || "*" === w1,
                    pattern: E ? A(E) : "[^" + k(x === f1 ? x : x + f1) + "]+?"
                });
            }
        }
        return (u1 || o1 < t1.length) && e1.push(u1 + t1.substr(o1)), e1;
    }
    function E(t1, n1) {
        return function(r3, e1) {
            var i1 = t1.exec(r3);
            if (!i1) return false;
            for(var o1 = i1[0], u1 = i1.index, f1 = {
            }, s1 = e1 && e1.decode || decodeURIComponent, c1 = 1; c1 < i1.length; c1++)if ((void 0) !== i1[c1]) {
                var a2 = n1[c1 - 1];
                f1[a2.name] = a2.repeat ? i1[c1].split(a2.delimiter).map(function(t2) {
                    return s1(t2, a2);
                }) : s1(i1[c1], a2);
            }
            return {
                path: o1,
                index: u1,
                params: f1
            };
        };
    }
    function x(t1, n1) {
        for(var r3 = new Array(t1.length), e1 = 0; e1 < t1.length; e1++)"object" == typeof t1[e1] && (r3[e1] = new RegExp("^(?:" + t1[e1].pattern + ")$", R(n1)));
        return function(n2, e2) {
            for(var i1 = "", o1 = e2 && e2.encode || encodeURIComponent, u1 = !e2 || false !== e2.validate, f1 = 0; f1 < t1.length; f1++){
                var s1 = t1[f1];
                if ("string" != typeof s1) {
                    var c1, a3 = n2 ? n2[s1.name] : void 0;
                    if (Array.isArray(a3)) {
                        if (!s1.repeat) throw new TypeError('Expected "' + s1.name + '" to not repeat, but got array');
                        if (0 === a3.length) {
                            if (s1.optional) continue;
                            throw new TypeError('Expected "' + s1.name + '" to not be empty');
                        }
                        for(var h2 = 0; h2 < a3.length; h2++){
                            if (c1 = o1(a3[h2], s1), u1 && !r3[f1].test(c1)) throw new TypeError('Expected all "' + s1.name + '" to match "' + s1.pattern + '"');
                            i1 += (0 === h2 ? s1.prefix : s1.delimiter) + c1;
                        }
                    } else if ("string" != typeof a3 && "number" != typeof a3 && "boolean" != typeof a3) {
                        if (!s1.optional) throw new TypeError('Expected "' + s1.name + '" to be ' + (s1.repeat ? "an array" : "a string"));
                    } else {
                        if (c1 = o1(String(a3), s1), u1 && !r3[f1].test(c1)) throw new TypeError('Expected "' + s1.name + '" to match "' + s1.pattern + '", but got "' + c1 + '"');
                        i1 += s1.prefix + c1;
                    }
                } else i1 += s1;
            }
            return i1;
        };
    }
    function k(t1) {
        return t1.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1");
    }
    function A(t1) {
        return t1.replace(/([=!:$/()])/g, "\\$1");
    }
    function R(t1) {
        return t1 && t1.sensitive ? "" : "i";
    }
    function T(t1, n1, r3) {
        for(var e1 = (r3 = r3 || {
        }).strict, i1 = false !== r3.start, o1 = false !== r3.end, u1 = r3.delimiter || y, f1 = [].concat(r3.endsWith || []).map(k).concat("$").join("|"), s2 = i1 ? "^" : "", c2 = 0; c2 < t1.length; c2++){
            var a4 = t1[c2];
            if ("string" == typeof a4) s2 += k(a4);
            else {
                var h3 = a4.repeat ? "(?:" + a4.pattern + ")(?:" + k(a4.delimiter) + "(?:" + a4.pattern + "))*" : a4.pattern;
                n1 && n1.push(a4), s2 += a4.optional ? a4.prefix ? "(?:" + k(a4.prefix) + "(" + h3 + "))?" : "(" + h3 + ")?" : k(a4.prefix) + "(" + h3 + ")";
            }
        }
        if (o1) e1 || (s2 += "(?:" + k(u1) + ")?"), s2 += "$" === f1 ? "$" : "(?=" + f1 + ")";
        else {
            var v2 = t1[t1.length - 1], l2 = "string" == typeof v2 ? v2[v2.length - 1] === u1 : (void 0) === v2;
            e1 || (s2 += "(?:" + k(u1) + "(?=" + f1 + "))?"), l2 || (s2 += "(?=" + k(u1) + "|" + f1 + ")");
        }
        return new RegExp(s2, R(r3));
    }
    function O(t1, n1, r3) {
        return t1 instanceof RegExp ? (function(t2, n2) {
            if (!n2) return t2;
            var r4 = t2.source.match(/\((?!\?)/g);
            if (r4) for(var e1 = 0; e1 < r4.length; e1++)n2.push({
                name: e1,
                prefix: null,
                delimiter: null,
                optional: false,
                repeat: false,
                pattern: null
            });
            return t2;
        })(t1, n1) : Array.isArray(t1) ? (function(t2, n2, r4) {
            for(var e1 = [], i1 = 0; i1 < t2.length; i1++)e1.push(O(t2[i1], n2, r4).source);
            return new RegExp("(?:" + e1.join("|") + ")", R(r4));
        })(t1, n1, r3) : (function(t2, n2, r4) {
            return T(g(t2, r4), n2, r4);
        })(t1, n1, r3);
    }
    d.match = function(t1, n1) {
        var r3 = [];
        return E(O(t1, r3, n1), r3);
    }, d.regexpToFunction = m, d.parse = p, d.compile = function(t1, n1) {
        return x(g(t1, n1), n1);
    }, d.tokensToFunction = w, d.tokensToRegExp = b;
    var S = {
        container: "container",
        history: "history",
        namespace: "namespace",
        prefix: "data-barba",
        prevent: "prevent",
        wrapper: "wrapper"
    }, j = new (function() {
        function t1() {
            this.o = S, this.u = new DOMParser;
        }
        var n1 = t1.prototype;
        return n1.toString = function(t2) {
            return t2.outerHTML;
        }, n1.toDocument = function(t2) {
            return this.u.parseFromString(t2, "text/html");
        }, n1.toElement = function(t2) {
            var n2 = document.createElement("div");
            return n2.innerHTML = t2, n2;
        }, n1.getHtml = function(t2) {
            return (void 0) === t2 && (t2 = document), this.toString(t2.documentElement);
        }, n1.getWrapper = function(t2) {
            return (void 0) === t2 && (t2 = document), t2.querySelector("[" + this.o.prefix + '="' + this.o.wrapper + '"]');
        }, n1.getContainer = function(t2) {
            return (void 0) === t2 && (t2 = document), t2.querySelector("[" + this.o.prefix + '="' + this.o.container + '"]');
        }, n1.removeContainer = function(t2) {
            document.body.contains(t2) && t2.parentNode.removeChild(t2);
        }, n1.addContainer = function(t2, n2) {
            var r3 = this.getContainer();
            r3 ? this.s(t2, r3) : n2.appendChild(t2);
        }, n1.getNamespace = function(t2) {
            (void 0) === t2 && (t2 = document);
            var n2 = t2.querySelector("[" + this.o.prefix + "-" + this.o.namespace + "]");
            return n2 ? n2.getAttribute(this.o.prefix + "-" + this.o.namespace) : null;
        }, n1.getHref = function(t2) {
            if (t2.tagName && "a" === t2.tagName.toLowerCase()) {
                if ("string" == typeof t2.href) return t2.href;
                var n2 = t2.getAttribute("href") || t2.getAttribute("xlink:href");
                if (n2) return this.resolveUrl(n2.baseVal || n2);
            }
            return null;
        }, n1.resolveUrl = function() {
            for(var t2 = arguments.length, n3 = new Array(t2), r3 = 0; r3 < t2; r3++)n3[r3] = arguments[r3];
            var e1 = n3.length;
            if (0 === e1) throw new Error("resolveUrl requires at least one argument; got none.");
            var i1 = document.createElement("base");
            if (i1.href = arguments[0], 1 === e1) return i1.href;
            var o1 = document.getElementsByTagName("head")[0];
            o1.insertBefore(i1, o1.firstChild);
            for(var u1, f1 = document.createElement("a"), s2 = 1; s2 < e1; s2++)f1.href = arguments[s2], i1.href = u1 = f1.href;
            return o1.removeChild(i1), u1;
        }, n1.s = function(t2, n3) {
            n3.parentNode.insertBefore(t2, n3.nextSibling);
        }, t1;
    }()), M = new (function() {
        function t1() {
            this.h = [], this.v = -1;
        }
        var e1 = t1.prototype;
        return e1.init = function(t2, n1) {
            this.l = "barba";
            var r3 = {
                ns: n1,
                scroll: {
                    x: window.scrollX,
                    y: window.scrollY
                },
                url: t2
            };
            this.h.push(r3), this.v = 0;
            var e2 = {
                from: this.l,
                index: 0,
                states: [].concat(this.h)
            };
            window.history && window.history.replaceState(e2, "", t2);
        }, e1.change = function(t2, n1, r3) {
            if (r3 && r3.state) {
                var e2 = r3.state, i1 = e2.index;
                n1 = this.m(this.v - i1), this.replace(e2.states), this.v = i1;
            } else this.add(t2, n1);
            return n1;
        }, e1.add = function(t2, n1) {
            var r3 = this.size, e3 = this.p(n1), i2 = {
                ns: "tmp",
                scroll: {
                    x: window.scrollX,
                    y: window.scrollY
                },
                url: t2
            };
            this.h.push(i2), this.v = r3;
            var o1 = {
                from: this.l,
                index: r3,
                states: [].concat(this.h)
            };
            switch(e3){
                case "push":
                    window.history && window.history.pushState(o1, "", t2);
                    break;
                case "replace":
                    window.history && window.history.replaceState(o1, "", t2);
            }
        }, e1.update = function(t2, n1) {
            var e3 = n1 || this.v, i2 = r2({
            }, this.get(e3), {
            }, t2);
            this.set(e3, i2);
        }, e1.remove = function(t2) {
            t2 ? this.h.splice(t2, 1) : this.h.pop(), this.v--;
        }, e1.clear = function() {
            this.h = [], this.v = -1;
        }, e1.replace = function(t2) {
            this.h = t2;
        }, e1.get = function(t2) {
            return this.h[t2];
        }, e1.set = function(t2, n1) {
            return this.h[t2] = n1;
        }, e1.p = function(t2) {
            var n1 = "push", r3 = t2, e3 = S.prefix + "-" + S.history;
            return r3.hasAttribute && r3.hasAttribute(e3) && (n1 = r3.getAttribute(e3)), n1;
        }, e1.m = function(t2) {
            return Math.abs(t2) > 1 ? t2 > 0 ? "forward" : "back" : 0 === t2 ? "popstate" : t2 > 0 ? "back" : "forward";
        }, n(t1, [
            {
                key: "current",
                get: function() {
                    return this.h[this.v];
                }
            },
            {
                key: "state",
                get: function() {
                    return this.h[this.h.length - 1];
                }
            },
            {
                key: "previous",
                get: function() {
                    return this.v < 1 ? null : this.h[this.v - 1];
                }
            },
            {
                key: "size",
                get: function() {
                    return this.h.length;
                }
            }
        ]), t1;
    }()), L = function(t1, n1) {
        try {
            var r3 = function() {
                if (!n1.next.html) return Promise.resolve(t1).then(function(t2) {
                    var r4 = n1.next;
                    if (t2) {
                        var e1 = j.toElement(t2);
                        r4.namespace = j.getNamespace(e1), r4.container = j.getContainer(e1), r4.html = t2, M.update({
                            ns: r4.namespace
                        });
                        var i2 = j.toDocument(t2);
                        document.title = i2.title;
                    }
                });
            }();
            return Promise.resolve(r3 && r3.then ? r3.then(function() {
            }) : void 0);
        } catch (t2) {
            return Promise.reject(t2);
        }
    }, $ = d, _ = {
        __proto__: null,
        update: L,
        nextTick: function() {
            return new Promise(function(t1) {
                window.requestAnimationFrame(t1);
            });
        },
        pathToRegexp: $
    }, q = function() {
        return window.location.origin;
    }, B = function(t1) {
        return (void 0) === t1 && (t1 = window.location.href), U(t1).port;
    }, U = function(t1) {
        var n1, r3 = t1.match(/:\d+/);
        if (null === r3) /^http/.test(t1) && (n1 = 80), /^https/.test(t1) && (n1 = 443);
        else {
            var e3 = r3[0].substring(1);
            n1 = parseInt(e3, 10);
        }
        var i3, o1 = t1.replace(q(), ""), u1 = {
        }, f1 = o1.indexOf("#");
        f1 >= 0 && (i3 = o1.slice(f1 + 1), o1 = o1.slice(0, f1));
        var s2 = o1.indexOf("?");
        return s2 >= 0 && (u1 = D(o1.slice(s2 + 1)), o1 = o1.slice(0, s2)), {
            hash: i3,
            path: o1,
            port: n1,
            query: u1
        };
    }, D = function(t1) {
        return t1.split("&").reduce(function(t2, n1) {
            var r3 = n1.split("=");
            return t2[r3[0]] = r3[1], t2;
        }, {
        });
    }, F = function(t1) {
        return (void 0) === t1 && (t1 = window.location.href), t1.replace(/(\/#.*|\/|#.*)$/, "");
    }, H = {
        __proto__: null,
        getHref: function() {
            return window.location.href;
        },
        getOrigin: q,
        getPort: B,
        getPath: function(t1) {
            return (void 0) === t1 && (t1 = window.location.href), U(t1).path;
        },
        parse: U,
        parseQuery: D,
        clean: F
    };
    function I(t1, n1, r3) {
        return (void 0) === n1 && (n1 = 2000), new Promise(function(e4, i3) {
            var o1 = new XMLHttpRequest;
            o1.onreadystatechange = function() {
                if (o1.readyState === XMLHttpRequest.DONE) {
                    if (200 === o1.status) e4(o1.responseText);
                    else if (o1.status) {
                        var n3 = {
                            status: o1.status,
                            statusText: o1.statusText
                        };
                        r3(t1, n3), i3(n3);
                    }
                }
            }, o1.ontimeout = function() {
                var e5 = new Error("Timeout error [" + n1 + "]");
                r3(t1, e5), i3(e5);
            }, o1.onerror = function() {
                var n4 = new Error("Fetch error");
                r3(t1, n4), i3(n4);
            }, o1.open("GET", t1), o1.timeout = n1, o1.setRequestHeader("Accept", "text/html,application/xhtml+xml,application/xml"), o1.setRequestHeader("x-barba", "yes"), o1.send();
        });
    }
    var C = function(t1) {
        return !!t1 && ("object" == typeof t1 || "function" == typeof t1) && "function" == typeof t1.then;
    };
    function N(t1, n1) {
        return (void 0) === n1 && (n1 = {
        }), function() {
            for(var r3 = arguments.length, e4 = new Array(r3), i3 = 0; i3 < r3; i3++)e4[i3] = arguments[i3];
            var o1 = false, u1 = new Promise(function(r4, i4) {
                n1.async = function() {
                    return o1 = true, function(t2, n4) {
                        t2 ? i4(t2) : r4(n4);
                    };
                };
                var u2 = t1.apply(n1, e4);
                o1 || (C(u2) ? u2.then(r4, i4) : r4(u2));
            });
            return u1;
        };
    }
    var X = new (function(t1) {
        function n1() {
            var n4;
            return (n4 = t1.call(this) || this).logger = new l("@barba/core"), n4.all = [
                "ready",
                "page",
                "reset",
                "currentAdded",
                "currentRemoved",
                "nextAdded",
                "nextRemoved",
                "beforeOnce",
                "once",
                "afterOnce",
                "before",
                "beforeLeave",
                "leave",
                "afterLeave",
                "beforeEnter",
                "enter",
                "afterEnter",
                "after"
            ], n4.registered = new Map, n4.init(), n4;
        }
        e(n1, t1);
        var r3 = n1.prototype;
        return r3.init = function() {
            var t2 = this;
            this.registered.clear(), this.all.forEach(function(n4) {
                t2[n4] || (t2[n4] = function(r4, e4) {
                    t2.registered.has(n4) || t2.registered.set(n4, new Set), t2.registered.get(n4).add({
                        ctx: e4 || {
                        },
                        fn: r4
                    });
                });
            });
        }, r3.do = function(t2) {
            for(var n4 = this, r4 = arguments.length, e4 = new Array(r4 > 1 ? r4 - 1 : 0), i3 = 1; i3 < r4; i3++)e4[i3 - 1] = arguments[i3];
            if (this.registered.has(t2)) {
                var o1 = Promise.resolve();
                return this.registered.get(t2).forEach(function(t3) {
                    o1 = o1.then(function() {
                        return N(t3.fn, t3.ctx).apply(void 0, e4);
                    });
                }), o1.catch(function(r5) {
                    n4.logger.debug("Hook error [" + t2 + "]"), n4.logger.error(r5);
                });
            }
            return Promise.resolve();
        }, r3.clear = function() {
            var t2 = this;
            this.all.forEach(function(n4) {
                delete t2[n4];
            }), this.init();
        }, r3.help = function() {
            this.logger.info("Available hooks: " + this.all.join(","));
            var t2 = [];
            this.registered.forEach(function(n4, r4) {
                return t2.push(r4);
            }), this.logger.info("Registered hooks: " + t2.join(","));
        }, n1;
    }(h)), z = function() {
        function t1(t2) {
            if (this.P = [], "boolean" == typeof t2) this.g = t2;
            else {
                var n1 = Array.isArray(t2) ? t2 : [
                    t2
                ];
                this.P = n1.map(function(t3) {
                    return $(t3);
                });
            }
        }
        return t1.prototype.checkHref = function(t2) {
            if ("boolean" == typeof this.g) return this.g;
            var n4 = U(t2).path;
            return this.P.some(function(t3) {
                return null !== t3.exec(n4);
            });
        }, t1;
    }(), G = function(t1) {
        function n4(n5) {
            var r3;
            return (r3 = t1.call(this, n5) || this).k = new Map, r3;
        }
        e(n4, t1);
        var i3 = n4.prototype;
        return i3.set = function(t2, n5, r3) {
            return this.k.set(t2, {
                action: r3,
                request: n5
            }), {
                action: r3,
                request: n5
            };
        }, i3.get = function(t2) {
            return this.k.get(t2);
        }, i3.getRequest = function(t2) {
            return this.k.get(t2).request;
        }, i3.getAction = function(t2) {
            return this.k.get(t2).action;
        }, i3.has = function(t2) {
            return !this.checkHref(t2) && this.k.has(t2);
        }, i3.delete = function(t2) {
            return this.k.delete(t2);
        }, i3.update = function(t2, n5) {
            var e4 = r2({
            }, this.k.get(t2), {
            }, n5);
            return this.k.set(t2, e4), e4;
        }, n4;
    }(z), Q = function() {
        return !window.history.pushState;
    }, W = function(t1) {
        return !t1.el || !t1.href;
    }, J = function(t1) {
        var n4 = t1.event;
        return n4.which > 1 || n4.metaKey || n4.ctrlKey || n4.shiftKey || n4.altKey;
    }, K = function(t1) {
        var n4 = t1.el;
        return n4.hasAttribute("target") && "_blank" === n4.target;
    }, V = function(t1) {
        var n4 = t1.el;
        return (void 0) !== n4.protocol && window.location.protocol !== n4.protocol || (void 0) !== n4.hostname && window.location.hostname !== n4.hostname;
    }, Y = function(t1) {
        var n4 = t1.el;
        return (void 0) !== n4.port && B() !== B(n4.href);
    }, Z = function(t1) {
        var n4 = t1.el;
        return n4.getAttribute && "string" == typeof n4.getAttribute("download");
    }, tt = function(t1) {
        return t1.el.hasAttribute(S.prefix + "-" + S.prevent);
    }, nt = function(t1) {
        return Boolean(t1.el.closest("[" + S.prefix + "-" + S.prevent + '="all"]'));
    }, rt = function(t1) {
        var n4 = t1.href;
        return F(n4) === F() && B(n4) === B();
    }, et = function(t1) {
        function n4(n5) {
            var r3;
            return (r3 = t1.call(this, n5) || this).suite = [], r3.tests = new Map, r3.init(), r3;
        }
        e(n4, t1);
        var r3 = n4.prototype;
        return r3.init = function() {
            this.add("pushState", Q), this.add("exists", W), this.add("newTab", J), this.add("blank", K), this.add("corsDomain", V), this.add("corsPort", Y), this.add("download", Z), this.add("preventSelf", tt), this.add("preventAll", nt), this.add("sameUrl", rt, false);
        }, r3.add = function(t2, n5, r4) {
            (void 0) === r4 && (r4 = true), this.tests.set(t2, n5), r4 && this.suite.push(t2);
        }, r3.run = function(t2, n5, r4, e4) {
            return this.tests.get(t2)({
                el: n5,
                event: r4,
                href: e4
            });
        }, r3.checkLink = function(t2, n5, r4) {
            var e4 = this;
            return this.suite.some(function(i3) {
                return e4.run(i3, t2, n5, r4);
            });
        }, n4;
    }(z), it = function(t1) {
        function n4(r3, e4) {
            var i3;
            (void 0) === e4 && (e4 = "Barba error");
            for(var o2 = arguments.length, u1 = new Array(o2 > 2 ? o2 - 2 : 0), f1 = 2; f1 < o2; f1++)u1[f1 - 2] = arguments[f1];
            return (i3 = t1.call.apply(t1, [
                this
            ].concat(u1)) || this).error = r3, i3.label = e4, Error.captureStackTrace && Error.captureStackTrace(function(t2) {
                if ((void 0) === t2) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return t2;
            }(i3), n4), i3.name = "BarbaError", i3;
        }
        return e(n4, t1), n4;
    }(f1(Error)), ot = function() {
        function t1(t2) {
            (void 0) === t2 && (t2 = []), this.logger = new l("@barba/core"), this.all = [], this.page = [], this.once = [], this.A = [
                {
                    name: "namespace",
                    type: "strings"
                },
                {
                    name: "custom",
                    type: "function"
                }
            ], t2 && (this.all = this.all.concat(t2)), this.update();
        }
        var n4 = t1.prototype;
        return n4.add = function(t2, n5) {
            switch(t2){
                case "rule":
                    this.A.splice(n5.position || 0, 0, n5.value);
                    break;
                case "transition":
                default:
                    this.all.push(n5);
            }
            this.update();
        }, n4.resolve = function(t2, n5) {
            var r3 = this;
            (void 0) === n5 && (n5 = {
            });
            var e4 = n5.once ? this.once : this.page;
            e4 = e4.filter(n5.self ? function(t3) {
                return t3.name && "self" === t3.name;
            } : function(t3) {
                return !t3.name || "self" !== t3.name;
            });
            var i3 = new Map, o2 = e4.find(function(e5) {
                var o3 = true, u1 = {
                };
                return !(!n5.self || "self" !== e5.name) || (r3.A.reverse().forEach(function(n6) {
                    o3 && (o3 = r3.R(e5, n6, t2, u1), e5.from && e5.to && (o3 = r3.R(e5, n6, t2, u1, "from") && r3.R(e5, n6, t2, u1, "to")), e5.from && !e5.to && (o3 = r3.R(e5, n6, t2, u1, "from")), !e5.from && e5.to && (o3 = r3.R(e5, n6, t2, u1, "to")));
                }), i3.set(e5, u1), o3);
            }), u1 = i3.get(o2), f1 = [];
            if (f1.push(n5.once ? "once" : "page"), n5.self && f1.push("self"), u1) {
                var s2, c2 = [
                    o2
                ];
                Object.keys(u1).length > 0 && c2.push(u1), (s2 = this.logger).info.apply(s2, [
                    "Transition found [" + f1.join(",") + "]"
                ].concat(c2));
            } else this.logger.info("No transition found [" + f1.join(",") + "]");
            return o2;
        }, n4.update = function() {
            var t2 = this;
            this.all = this.all.map(function(n5) {
                return t2.T(n5);
            }).sort(function(t3, n5) {
                return t3.priority - n5.priority;
            }).reverse().map(function(t3) {
                return delete t3.priority, t3;
            }), this.page = this.all.filter(function(t3) {
                return (void 0) !== t3.leave || (void 0) !== t3.enter;
            }), this.once = this.all.filter(function(t3) {
                return (void 0) !== t3.once;
            });
        }, n4.R = function(t2, n5, r3, e4, i3) {
            var o2 = true, u1 = false, f1 = t2, s3 = n5.name, c3 = s3, a5 = s3, h4 = s3, v3 = i3 ? f1[i3] : f1, l3 = "to" === i3 ? r3.next : r3.current;
            if (i3 ? v3 && v3[s3] : v3[s3]) {
                switch(n5.type){
                    case "strings":
                    default:
                        var d2 = Array.isArray(v3[c3]) ? v3[c3] : [
                            v3[c3]
                        ];
                        l3[c3] && -1 !== d2.indexOf(l3[c3]) && (u1 = true), -1 === d2.indexOf(l3[c3]) && (o2 = false);
                        break;
                    case "object":
                        var m2 = Array.isArray(v3[a5]) ? v3[a5] : [
                            v3[a5]
                        ];
                        l3[a5] ? (l3[a5].name && -1 !== m2.indexOf(l3[a5].name) && (u1 = true), -1 === m2.indexOf(l3[a5].name) && (o2 = false)) : o2 = false;
                        break;
                    case "function":
                        v3[h4](r3) ? u1 = true : o2 = false;
                }
                u1 && (i3 ? (e4[i3] = e4[i3] || {
                }, e4[i3][s3] = f1[i3][s3]) : e4[s3] = f1[s3]);
            }
            return o2;
        }, n4.O = function(t2, n5, r3) {
            var e4 = 0;
            return (t2[n5] || t2.from && t2.from[n5] || t2.to && t2.to[n5]) && (e4 += Math.pow(10, r3), t2.from && t2.from[n5] && (e4 += 1), t2.to && t2.to[n5] && (e4 += 2)), e4;
        }, n4.T = function(t2) {
            var n5 = this;
            t2.priority = 0;
            var r3 = 0;
            return this.A.forEach(function(e4, i3) {
                r3 += n5.O(t2, e4.name, i3 + 1);
            }), t2.priority = r3, t2;
        }, t1;
    }(), ut = function() {
        function t1(t2) {
            (void 0) === t2 && (t2 = []), this.logger = new l("@barba/core"), this.S = false, this.store = new ot(t2);
        }
        var r3 = t1.prototype;
        return r3.get = function(t2, n4) {
            return this.store.resolve(t2, n4);
        }, r3.doOnce = function(t2) {
            var n4 = t2.data, r4 = t2.transition;
            try {
                var e4 = function() {
                    i4.S = false;
                }, i4 = this, o2 = r4 || {
                };
                i4.S = true;
                var u1 = s(function() {
                    return Promise.resolve(i4.j("beforeOnce", n4, o2)).then(function() {
                        return Promise.resolve(i4.once(n4, o2)).then(function() {
                            return Promise.resolve(i4.j("afterOnce", n4, o2)).then(function() {
                            });
                        });
                    });
                }, function(t3) {
                    i4.S = false, i4.logger.debug("Transition error [before/after/once]"), i4.logger.error(t3);
                });
                return Promise.resolve(u1 && u1.then ? u1.then(e4) : e4());
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, r3.doPage = function(t2) {
            var n4 = t2.data, r4 = t2.transition, e4 = t2.page, i4 = t2.wrapper;
            try {
                var o2 = function(t3) {
                    if (u2) return t3;
                    f2.S = false;
                }, u2 = false, f2 = this, c3 = r4 || {
                }, a5 = true === c3.sync || false;
                f2.S = true;
                var h4 = s(function() {
                    function t3() {
                        return Promise.resolve(f2.j("before", n4, c3)).then(function() {
                            var t4 = false;
                            function r5(r6) {
                                return t4 ? r6 : Promise.resolve(f2.remove(n4)).then(function() {
                                    return Promise.resolve(f2.j("after", n4, c3)).then(function() {
                                    });
                                });
                            }
                            var o3 = function() {
                                if (a5) return s(function() {
                                    return Promise.resolve(f2.add(n4, i4)).then(function() {
                                        return Promise.resolve(f2.j("beforeLeave", n4, c3)).then(function() {
                                            return Promise.resolve(f2.j("beforeEnter", n4, c3)).then(function() {
                                                return Promise.resolve(Promise.all([
                                                    f2.leave(n4, c3),
                                                    f2.enter(n4, c3)
                                                ])).then(function() {
                                                    return Promise.resolve(f2.j("afterLeave", n4, c3)).then(function() {
                                                        return Promise.resolve(f2.j("afterEnter", n4, c3)).then(function() {
                                                        });
                                                    });
                                                });
                                            });
                                        });
                                    });
                                }, function(t5) {
                                    if (f2.M(t5)) throw new it(t5, "Transition error [sync]");
                                });
                                var r6 = function(r7) {
                                    return t4 ? r7 : s(function() {
                                        var t5 = function() {
                                            if (false !== o5) return Promise.resolve(f2.add(n4, i4)).then(function() {
                                                return Promise.resolve(f2.j("beforeEnter", n4, c3)).then(function() {
                                                    return Promise.resolve(f2.enter(n4, c3, o5)).then(function() {
                                                        return Promise.resolve(f2.j("afterEnter", n4, c3)).then(function() {
                                                        });
                                                    });
                                                });
                                            });
                                        }();
                                        if (t5 && t5.then) return t5.then(function() {
                                        });
                                    }, function(t5) {
                                        if (f2.M(t5)) throw new it(t5, "Transition error [before/after/enter]");
                                    });
                                }, o5 = false, u3 = s(function() {
                                    return Promise.resolve(f2.j("beforeLeave", n4, c3)).then(function() {
                                        return Promise.resolve(Promise.all([
                                            f2.leave(n4, c3),
                                            L(e4, n4)
                                        ]).then(function(t5) {
                                            return t5[0];
                                        })).then(function(t5) {
                                            return o5 = t5, Promise.resolve(f2.j("afterLeave", n4, c3)).then(function() {
                                            });
                                        });
                                    });
                                }, function(t5) {
                                    if (f2.M(t5)) throw new it(t5, "Transition error [before/after/leave]");
                                });
                                return u3 && u3.then ? u3.then(r6) : r6(u3);
                            }();
                            return o3 && o3.then ? o3.then(r5) : r5(o3);
                        });
                    }
                    var r5 = function() {
                        if (a5) return Promise.resolve(L(e4, n4)).then(function() {
                        });
                    }();
                    return r5 && r5.then ? r5.then(t3) : t3();
                }, function(t3) {
                    if (f2.S = false, t3.name && "BarbaError" === t3.name) throw f2.logger.debug(t3.label), f2.logger.error(t3.error), t3;
                    throw f2.logger.debug("Transition error [page]"), f2.logger.error(t3), t3;
                });
                return Promise.resolve(h4 && h4.then ? h4.then(o2) : o2(h4));
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, r3.once = function(t2, n4) {
            try {
                return Promise.resolve(X.do("once", t2, n4)).then(function() {
                    return n4.once ? N(n4.once, n4)(t2) : Promise.resolve();
                });
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, r3.leave = function(t2, n4) {
            try {
                return Promise.resolve(X.do("leave", t2, n4)).then(function() {
                    return n4.leave ? N(n4.leave, n4)(t2) : Promise.resolve();
                });
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, r3.enter = function(t2, n4, r4) {
            try {
                return Promise.resolve(X.do("enter", t2, n4)).then(function() {
                    return n4.enter ? N(n4.enter, n4)(t2, r4) : Promise.resolve();
                });
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, r3.add = function(t2, n4) {
            try {
                return j.addContainer(t2.next.container, n4), X.do("nextAdded", t2), Promise.resolve();
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, r3.remove = function(t2) {
            try {
                return j.removeContainer(t2.current.container), X.do("currentRemoved", t2), Promise.resolve();
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, r3.M = function(t2) {
            return t2.message ? !/Timeout error|Fetch error/.test(t2.message) : !t2.status;
        }, r3.j = function(t2, n4, r4) {
            try {
                return Promise.resolve(X.do(t2, n4, r4)).then(function() {
                    return r4[t2] ? N(r4[t2], r4)(n4) : Promise.resolve();
                });
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, n(t1, [
            {
                key: "isRunning",
                get: function() {
                    return this.S;
                },
                set: function(t2) {
                    this.S = t2;
                }
            },
            {
                key: "hasOnce",
                get: function() {
                    return this.store.once.length > 0;
                }
            },
            {
                key: "hasSelf",
                get: function() {
                    return this.store.all.some(function(t2) {
                        return "self" === t2.name;
                    });
                }
            },
            {
                key: "shouldWait",
                get: function() {
                    return this.store.all.some(function(t2) {
                        return t2.to && !t2.to.route || t2.sync;
                    });
                }
            }
        ]), t1;
    }(), ft = function() {
        function t1(t2) {
            var n4 = this;
            this.names = [
                "beforeLeave",
                "afterLeave",
                "beforeEnter",
                "afterEnter"
            ], this.byNamespace = new Map, 0 !== t2.length && (t2.forEach(function(t3) {
                n4.byNamespace.set(t3.namespace, t3);
            }), this.names.forEach(function(t3) {
                X[t3](n4.L(t3));
            }));
        }
        return t1.prototype.L = function(t2) {
            var n4 = this;
            return function(r3) {
                var e4 = t2.match(/enter/i) ? r3.next : r3.current, i4 = n4.byNamespace.get(e4.namespace);
                return i4 && i4[t2] ? N(i4[t2], i4)(r3) : Promise.resolve();
            };
        }, t1;
    }();
    Element.prototype.matches || (Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector), Element.prototype.closest || (Element.prototype.closest = function(t1) {
        var n4 = this;
        do {
            if (n4.matches(t1)) return n4;
            n4 = n4.parentElement || n4.parentNode;
        }while (null !== n4 && 1 === n4.nodeType)
        return null;
    });
    var st = {
        container: null,
        html: "",
        namespace: "",
        url: {
            hash: "",
            href: "",
            path: "",
            port: null,
            query: {
            }
        }
    };
    return new (function() {
        function t1() {
            this.version = a, this.schemaPage = st, this.Logger = l, this.logger = new l("@barba/core"), this.plugins = [], this.hooks = X, this.dom = j, this.helpers = _, this.history = M, this.request = I, this.url = H;
        }
        var e4 = t1.prototype;
        return e4.use = function(t2, n4) {
            var r3 = this.plugins;
            r3.indexOf(t2) > -1 ? this.logger.warn("Plugin [" + t2.name + "] already installed.") : "function" == typeof t2.install ? (t2.install(this, n4), r3.push(t2)) : this.logger.warn("Plugin [" + t2.name + '] has no "install" method.');
        }, e4.init = function(t2) {
            var n4 = (void 0) === t2 ? {
            } : t2, e5 = n4.transitions, i4 = (void 0) === e5 ? [] : e5, o2 = n4.views, u2 = (void 0) === o2 ? [] : o2, f2 = n4.schema, s3 = (void 0) === f2 ? S : f2, c3 = n4.requestError, a5 = n4.timeout, h4 = (void 0) === a5 ? 2000 : a5, v3 = n4.cacheIgnore, d3 = (void 0) !== v3 && v3, m3 = n4.prefetchIgnore, p2 = (void 0) !== m3 && m3, w2 = n4.preventRunning, b2 = (void 0) !== w2 && w2, y1 = n4.prevent, P1 = (void 0) === y1 ? null : y1, g2 = n4.debug, E1 = n4.logLevel;
            if (l.setLevel(true === ((void 0) !== g2 && g2) ? "debug" : (void 0) === E1 ? "off" : E1), this.logger.info(this.version), Object.keys(s3).forEach(function(t3) {
                S[t3] && (S[t3] = s3[t3]);
            }), this.$ = c3, this.timeout = h4, this.cacheIgnore = d3, this.prefetchIgnore = p2, this.preventRunning = b2, this._ = this.dom.getWrapper(), !this._) throw new Error("[@barba/core] No Barba wrapper found");
            this._.setAttribute("aria-live", "polite"), this.q();
            var x1 = this.data.current;
            if (!x1.container) throw new Error("[@barba/core] No Barba container found");
            if (this.cache = new G(d3), this.prevent = new et(p2), this.transitions = new ut(i4), this.views = new ft(u2), null !== P1) {
                if ("function" != typeof P1) throw new Error("[@barba/core] Prevent should be a function");
                this.prevent.add("preventCustom", P1);
            }
            this.history.init(x1.url.href, x1.namespace), this.B = this.B.bind(this), this.U = this.U.bind(this), this.D = this.D.bind(this), this.F(), this.plugins.forEach(function(t3) {
                return t3.init();
            });
            var k1 = this.data;
            k1.trigger = "barba", k1.next = k1.current, k1.current = r2({
            }, this.schemaPage), this.hooks.do("ready", k1), this.once(k1), this.q();
        }, e4.destroy = function() {
            this.q(), this.H(), this.history.clear(), this.hooks.clear(), this.plugins = [];
        }, e4.force = function(t2) {
            window.location.assign(t2);
        }, e4.go = function(t2, n4, r3) {
            var e5;
            if ((void 0) === n4 && (n4 = "barba"), this.transitions.isRunning) this.force(t2);
            else if (!(e5 = "popstate" === n4 ? this.history.current && this.url.getPath(this.history.current.url) === this.url.getPath(t2) : this.prevent.run("sameUrl", null, null, t2)) || this.transitions.hasSelf) return n4 = this.history.change(t2, n4, r3), r3 && (r3.stopPropagation(), r3.preventDefault()), this.page(t2, n4, e5);
        }, e4.once = function(t2) {
            try {
                var n4 = this;
                return Promise.resolve(n4.hooks.do("beforeEnter", t2)).then(function() {
                    function r3() {
                        return Promise.resolve(n4.hooks.do("afterEnter", t2)).then(function() {
                        });
                    }
                    var e5 = function() {
                        if (n4.transitions.hasOnce) {
                            var r4 = n4.transitions.get(t2, {
                                once: true
                            });
                            return Promise.resolve(n4.transitions.doOnce({
                                transition: r4,
                                data: t2
                            })).then(function() {
                            });
                        }
                    }();
                    return e5 && e5.then ? e5.then(r3) : r3();
                });
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, e4.page = function(t2, n4, e5) {
            try {
                var i4 = function() {
                    var t3 = o2.data;
                    return Promise.resolve(o2.hooks.do("page", t3)).then(function() {
                        var n5 = s(function() {
                            var n6 = o2.transitions.get(t3, {
                                once: false,
                                self: e5
                            });
                            return Promise.resolve(o2.transitions.doPage({
                                data: t3,
                                page: u2,
                                transition: n6,
                                wrapper: o2._
                            })).then(function() {
                                o2.q();
                            });
                        }, function() {
                            0 === l.getLevel() && o2.force(t3.current.url.href);
                        });
                        if (n5 && n5.then) return n5.then(function() {
                        });
                    });
                }, o2 = this;
                o2.data.next.url = r2({
                    href: t2
                }, o2.url.parse(t2)), o2.data.trigger = n4;
                var u2 = o2.cache.has(t2) ? o2.cache.update(t2, {
                    action: "click"
                }).request : o2.cache.set(t2, o2.request(t2, o2.timeout, o2.onRequestError.bind(o2, n4)), "click").request, f2 = function() {
                    if (o2.transitions.shouldWait) return Promise.resolve(L(u2, o2.data)).then(function() {
                    });
                }();
                return Promise.resolve(f2 && f2.then ? f2.then(i4) : i4());
            } catch (t3) {
                return Promise.reject(t3);
            }
        }, e4.onRequestError = function(t2) {
            this.transitions.isRunning = false;
            for(var n4 = arguments.length, r3 = new Array(n4 > 1 ? n4 - 1 : 0), e5 = 1; e5 < n4; e5++)r3[e5 - 1] = arguments[e5];
            var i4 = r3[0], o2 = r3[1], u2 = this.cache.getAction(i4);
            return this.cache.delete(i4), this.$, this.$(t2, u2, i4, o2), this.force(i4), false;
        }, e4.prefetch = function(t2) {
            var n4 = this;
            this.cache.has(t2) || this.cache.set(t2, this.request(t2, this.timeout, this.onRequestError.bind(this, "barba")).catch(function(t3) {
                n4.logger.error(t3);
            }), "prefetch");
        }, e4.F = function() {
            true !== this.prefetchIgnore && (document.addEventListener("mouseover", this.B), document.addEventListener("touchstart", this.B)), document.addEventListener("click", this.U), window.addEventListener("popstate", this.D);
        }, e4.H = function() {
            true !== this.prefetchIgnore && (document.removeEventListener("mouseover", this.B), document.removeEventListener("touchstart", this.B)), document.removeEventListener("click", this.U), window.removeEventListener("popstate", this.D);
        }, e4.B = function(t2) {
            var n4 = this, r3 = this.I(t2);
            if (r3) {
                var e5 = this.dom.getHref(r3);
                this.prevent.checkHref(e5) || this.cache.has(e5) || this.cache.set(e5, this.request(e5, this.timeout, this.onRequestError.bind(this, r3)).catch(function(t3) {
                    n4.logger.error(t3);
                }), "enter");
            }
        }, e4.U = function(t2) {
            var n4 = this.I(t2);
            if (n4) return this.transitions.isRunning && this.preventRunning ? (t2.preventDefault(), void t2.stopPropagation()) : void this.go(this.dom.getHref(n4), n4, t2);
        }, e4.D = function(t2) {
            this.go(this.url.getHref(), "popstate", t2);
        }, e4.I = function(t2) {
            for(var n4 = t2.target; n4 && !this.dom.getHref(n4);)n4 = n4.parentNode;
            if (n4 && !this.prevent.checkLink(n4, t2, this.dom.getHref(n4))) return n4;
        }, e4.q = function() {
            var t2 = this.url.getHref(), n4 = {
                container: this.dom.getContainer(),
                html: this.dom.getHtml(),
                namespace: this.dom.getNamespace(),
                url: r2({
                    href: t2
                }, this.url.parse(t2))
            };
            this.C = {
                current: n4,
                next: r2({
                }, this.schemaPage),
                trigger: void 0
            }, this.hooks.do("reset", this.data);
        }, n(t1, [
            {
                key: "data",
                get: function() {
                    return this.C;
                }
            },
            {
                key: "wrapper",
                get: function() {
                    return this._;
                }
            }
        ]), t1;
    }());
});
