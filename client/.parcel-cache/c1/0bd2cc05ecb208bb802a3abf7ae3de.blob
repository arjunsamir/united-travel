"use strict";
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _normalizeInitials = _interopRequireDefault(require("./normalizeInitials"));
var _content = _interopRequireDefault(require("./styled/content"));
var _image = _interopRequireDefault(require("./styled/image"));
function _createSuper(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct();
    return function _createSuperInternal() {
        var Super = _getPrototypeOf2["default"](Derived), result;
        if (hasNativeReflectConstruct) {
            var NewTarget = _getPrototypeOf2["default"](this).constructor;
            result = Reflect.construct(Super, arguments, NewTarget);
        } else result = Super.apply(this, arguments);
        return _possibleConstructorReturn2["default"](this, result);
    };
}
function _isNativeReflectConstruct() {
    if (typeof Reflect === "undefined" || !Reflect.construct) return false;
    if (Reflect.construct.sham) return false;
    if (typeof Proxy === "function") return true;
    try {
        Date.prototype.toString.call(Reflect.construct(Date, [], function() {
        }));
        return true;
    } catch (e) {
        return false;
    }
}
var AvatarContent1 = /*#__PURE__*/ function(_Component) {
    _inherits2["default"](AvatarContent2, _Component);
    var _super = _createSuper(AvatarContent2);
    function AvatarContent2(props) {
        var _this;
        _classCallCheck2["default"](this, AvatarContent2);
        _this = _super.call(this, props);
        _this.state = {
            imageFailed: false
        };
        _this.handleImageError = _this.handleImageError.bind(_assertThisInitialized2["default"](_this));
        return _this;
    }
    _createClass2["default"](AvatarContent2, [
        {
            key: "handleImageError",
            value: function handleImageError() {
                this.setState({
                    imageFailed: true
                });
            }
        },
        {
            key: "render",
            value: function render() {
                var _this$props = this.props, src = _this$props.src, initials = _this$props.initials, title = _this$props.title, icon = _this$props.icon, assistiveText = _this$props.assistiveText, initialsVariant = _this$props.initialsVariant;
                var imageFailed = this.state.imageFailed;
                if (src && !imageFailed) return(/*#__PURE__*/ _react["default"].createElement(_image["default"], {
                    src: src,
                    onError: this.handleImageError,
                    title: title,
                    alt: assistiveText
                }));
                if (initials) return(/*#__PURE__*/ _react["default"].createElement(_content["default"], {
                    as: "abbr",
                    initialsVariant: initialsVariant,
                    title: title
                }, _normalizeInitials["default"](initials)));
                if (icon) return(/*#__PURE__*/ _react["default"].createElement(_content["default"], {
                    initialsVariant: initialsVariant,
                    title: title
                }, icon));
                return(/*#__PURE__*/ _react["default"].createElement(_content["default"], {
                    initialsVariant: initialsVariant,
                    title: title
                }));
            }
        }
    ]);
    return AvatarContent2;
}(_react.Component);
exports["default"] = AvatarContent1;
AvatarContent1.propTypes = {
    src: _propTypes["default"].string,
    initials: _propTypes["default"].string,
    initialsVariant: _propTypes["default"].string.isRequired,
    title: _propTypes["default"].string,
    icon: _propTypes["default"].node,
    assistiveText: _propTypes["default"].string
};
AvatarContent1.defaultProps = {
    src: undefined,
    initials: undefined,
    title: undefined,
    icon: null,
    assistiveText: undefined
};
