var helpers = require("../../../../../../../../../usr/local/lib/node_modules/parcel/node_modules/@parcel/transformer-react-refresh-wrap/lib/helpers/helpers.js");
var prevRefreshReg = window.$RefreshReg$;
var prevRefreshSig = window.$RefreshSig$;
helpers.prelude(module);

try {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.reducer = exports.initialState = exports.AppContext = void 0;
var _react = _interopRequireDefault(require("react"));
var _Merger = _interopRequireDefault(require("./helpers/Merger"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly) symbols = symbols.filter(function(sym) {
            return Object.getOwnPropertyDescriptor(object, sym).enumerable;
        });
        keys.push.apply(keys, symbols);
    }
    return keys;
}
function _objectSpread(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {
        };
        if (i % 2) ownKeys(Object(source), true).forEach(function(key) {
            _defineProperty(target, key, source[key]);
        });
        else if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
        else ownKeys(Object(source)).forEach(function(key) {
            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
    }
    return target;
}
function _defineProperty(obj, key, value) {
    if (key in obj) Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
    });
    else obj[key] = value;
    return obj;
}
// Create Context Object
const AppContext = /*#__PURE__*/ _react.default.createContext(); // Create Initial Applicaiton State
exports.AppContext = AppContext;
const initialState = {
    reservation: {
        airportRide: null,
        flight: {
            number: '',
            airline: '',
            type: '',
            airport: {
            }
        },
        origin: {
            placeId: '',
            coordinates: [],
            name: '',
            address: ''
        },
        destination: {
            placeId: '',
            coordinates: [],
            name: '',
            address: ''
        },
        schedule: {
            pickup: null,
            dropoff: null
        },
        route: {
            distance: 0,
            eta: ''
        },
        passengers: {
            total: 1,
            adults: 1,
            children: 0,
            infants: 0
        },
        luggage: {
            total: 0,
            small: 0,
            medium: 0,
            large: 0
        },
        vehicle: null,
        payment: {
            method: '',
            appliedCredit: '',
            total: 0
        }
    },
    app: {
        // step: 'airport-ride',
        step: 'flight-schedule',
        airports: null
    }
}; //Create Reducer
exports.initialState = initialState;
const reducer = (state, action)=>{
    var _state$app$airports$f;
    const [method, category, type] = action.type.toLowerCase().split('_');
    if (!state[category]) return state;
    const m = new _Merger.default(category, state);
    const PL = action.payload; // Helper Functions
    const setAirport = (newAirport)=>{
        const airport = newAirport !== null && newAirport !== void 0 ? newAirport : state.reservation.flight.airport; // Destructure Properties
        const { placeId , coordinates , address , name  } = airport; // Update Airport
        m.merge({
            airport: _objectSpread({
            }, airport)
        }, 'flight'); // Update Origin/Destination
        switch(m.state.reservation.flight.type){
            case 'arriving':
                m.merge({
                    origin: {
                        placeId,
                        coordinates,
                        address,
                        name
                    }
                });
                break;
            case 'departing':
                m.merge({
                    destination: {
                        placeId,
                        coordinates,
                        address,
                        name
                    }
                });
                break;
        }
        return _objectSpread({
        }, m.state);
    };
    if (method === 'update') switch(type){
        case 'airport-ride':
            m.merge({
                airportRide: PL
            });
            if (PL) setAirport();
            return m.state;
        case 'flight-number':
            return m.merge({
                number: PL
            }, 'flight');
        case 'airline':
            return m.merge({
                airline: PL
            }, 'flight');
        case 'flight-type':
            m.merge({
                type: PL
            }, 'flight');
            return setAirport();
        case 'airport':
            return setAirport((_state$app$airports$f = state.app.airports.find((apt)=>apt.code === PL
            )) !== null && _state$app$airports$f !== void 0 ? _state$app$airports$f : {
            });
        case 'origin':
            return m.merge({
                origin: _objectSpread({
                }, PL)
            });
        case 'destination':
            return m.merge({
                destination: _objectSpread({
                }, PL)
            });
        case 'pickup-time':
            return m.merge({
                pickup: PL
            }, 'schedule');
        case 'dropoff-time':
            return m.merge({
                dropoff: PL
            }, 'schedule');
        case 'route':
            return m.merge({
                route: _objectSpread({
                }, PL)
            });
        case 'passengers':
            return m.merge({
                passengers: _objectSpread({
                }, PL)
            });
        case 'luggage':
            return m.merge({
                luggage: _objectSpread({
                }, PL)
            });
        case 'vehicle':
            return m.merge({
                vehicle: PL
            });
        case 'payment':
            return m.merge({
                payment: _objectSpread({
                }, PL)
            });
        default:
            return state;
    }
    else if (method === 'set') switch(type){
        case 'step':
            return m.merge({
                step: PL
            });
        case 'airports':
            return m.merge({
                airports: [
                    ...PL
                ]
            });
        default:
            return state;
    }
    else return state;
};
exports.reducer = reducer;

  helpers.postlude(module);
} finally {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}